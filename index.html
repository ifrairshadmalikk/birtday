<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Birthday Celebration Creator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #BB86FC;
            --secondary: #03DAC6;
            --accent: #FF7597;
            --dark-bg: #121212;
            --dark-surface: #1E1E1E;
            --dark-card: #252525;
            --dark-text: #E0E0E0;
            --dark-text-secondary: #A0A0A0;
            --success: #4ECDC4;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #0D0D0D 0%, #1A1A2E 100%);
            min-height: 100vh;
            overflow-x: hidden;
            color: var(--dark-text);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            padding: 40px 20px;
            position: relative;
        }

        h1 {
            font-size: 3.5em;
            margin-bottom: 10px;
            font-weight: 800;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .subtitle {
            font-size: 1.3em;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
            color: var(--dark-text-secondary);
        }

        .nav-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            margin: 30px 0;
        }

        .nav-btn {
            background: var(--dark-card);
            color: var(--dark-text);
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .nav-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.4);
            background: var(--primary);
            color: var(--dark-bg);
        }

        .nav-btn.active {
            background: var(--primary);
            color: var(--dark-bg);
        }

        .section {
            display: none;
            background: var(--dark-surface);
            border-radius: 20px;
            padding: 40px;
            margin: 20px 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            animation: fadeIn 0.5s ease;
            border: 1px solid rgba(255,255,255,0.05);
        }

        .section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .input-group {
            margin: 20px 0;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: var(--dark-text);
        }

        input, textarea, select {
            width: 100%;
            padding: 12px;
            background: var(--dark-card);
            border: 2px solid rgba(255,255,255,0.1);
            border-radius: 10px;
            font-size: 1em;
            transition: all 0.3s ease;
            font-family: 'Poppins', sans-serif;
            color: var(--dark-text);
        }

        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(187, 134, 252, 0.2);
        }

        .btn {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: var(--dark-bg);
            border: none;
            padding: 15px 40px;
            border-radius: 25px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }

        .btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(0,0,0,0.4);
        }

        .btn-secondary {
            background: var(--dark-card);
            color: var(--dark-text);
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .birthday-card {
            background: linear-gradient(135deg, var(--dark-card) 0%, rgba(187, 134, 252, 0.2) 100%);
            padding: 40px;
            border-radius: 15px;
            color: var(--dark-text);
            text-align: center;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(187, 134, 252, 0.1);
        }

        .birthday-card::before {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(187, 134, 252, 0.1) 0%, rgba(187, 134, 252, 0) 70%);
            transform: rotate(30deg);
        }

        .birthday-card h2 {
            font-size: 2.5em;
            margin-bottom: 20px;
            position: relative;
        }

        .birthday-card p {
            font-size: 1.2em;
            line-height: 1.6;
            position: relative;
        }

        .balloon {
            width: 50px;
            height: 70px;
            background: var(--primary);
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            position: relative;
            animation: float 3s ease-in-out infinite;
            display: inline-block;
            margin: 0 10px;
            box-shadow: 0 5px 10px rgba(0,0,0,0.3);
        }

        .balloon:nth-child(2) {
            background: var(--accent);
            animation-delay: 0.5s;
        }

        .balloon:nth-child(3) {
            background: var(--secondary);
            animation-delay: 1s;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(-5deg); }
            50% { transform: translateY(-20px) rotate(5deg); }
        }

        .confetti {
            position: fixed;
            width: 12px;
            height: 12px;
            background: var(--primary);
            position: absolute;
            animation: confetti-fall 3s linear forwards;
            z-index: 1000;
        }

        @keyframes confetti-fall {
            0% {
                transform: translateY(-100px) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }

        .wish-list {
            display: grid;
            gap: 15px;
            margin-top: 20px;
        }

        .wish-item {
            background: var(--dark-card);
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid var(--primary);
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: transform 0.2s ease;
        }

        .wish-item:hover {
            transform: translateX(5px);
        }

        .countdown {
            text-align: center;
            font-size: 2em;
            color: var(--primary);
            margin: 20px 0;
            font-weight: bold;
        }

        .photo-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .photo-item {
            aspect-ratio: 1;
            background: linear-gradient(135deg, var(--dark-card) 0%, rgba(3, 218, 198, 0.2) 100%);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--dark-text);
            font-size: 3em;
            cursor: pointer;
            transition: transform 0.3s ease;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(255,255,255,0.05);
        }

        .photo-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .photo-item:hover {
            transform: scale(1.05);
        }

        .photo-upload {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border: 2px dashed var(--primary);
            border-radius: 10px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .photo-upload:hover {
            background: rgba(187, 134, 252, 0.1);
        }

        .photo-upload i {
            font-size: 3em;
            color: var(--primary);
            margin-bottom: 10px;
        }

        .cake-container {
            text-align: center;
            margin: 30px 0;
        }

        .cake-image {
            max-width: 300px;
            margin: 0 auto;
            filter: drop-shadow(0 10px 20px rgba(0,0,0,0.5));
            transition: transform 0.3s ease;
            cursor: pointer;
        }

        .cake-image:hover {
            transform: scale(1.05);
        }

        .share-link {
            background: var(--dark-card);
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            word-break: break-all;
            font-family: monospace;
            border: 2px dashed var(--primary);
        }

        .theme-selector {
            display: flex;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .theme-option {
            width: 50px;
            height: 50px;
            border-radius: 10px;
            cursor: pointer;
            border: 3px solid transparent;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .theme-option.active {
            border-color: var(--primary);
            transform: scale(1.1);
        }

        .theme-option::after {
            content: "✓";
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 1.5em;
            opacity: 0;
            transition: opacity 0.3s ease;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }

        .theme-option.active::after {
            opacity: 1;
        }

        /* Celebration Page Styles */
        .celebration-page {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #0D0D0D 0%, #1A1A2E 100%);
            z-index: 1000;
            overflow-y: auto;
            text-align: center;
            padding: 20px;
        }

        .celebration-content {
            max-width: 800px;
            margin: 0 auto;
            padding: 40px 20px;
            position: relative;
        }

        .celebration-title {
            font-size: 4em;
            margin-bottom: 20px;
            animation: bounceIn 1s ease;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        @keyframes bounceIn {
            0% {
                transform: scale(0.5);
                opacity: 0;
            }
            70% {
                transform: scale(1.1);
                opacity: 1;
            }
            100% {
                transform: scale(1);
            }
        }

        .celebration-message {
            font-size: 1.5em;
            margin-bottom: 40px;
            line-height: 1.6;
            color: var(--dark-text-secondary);
        }

        .celebration-card {
            background: rgba(30, 30, 30, 0.8);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            margin: 30px 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            position: relative;
            overflow: hidden;
            color: var(--dark-text);
            border: 1px solid rgba(255,255,255,0.05);
        }

        .celebration-card::before {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(187, 134, 252, 0.1) 0%, rgba(187, 134, 252, 0) 70%);
            transform: rotate(30deg);
        }

        .celebration-wishes {
            display: grid;
            gap: 15px;
            margin: 30px 0;
        }

        .celebration-wish {
            background: rgba(37, 37, 37, 0.8);
            padding: 15px;
            border-radius: 10px;
            text-align: left;
            backdrop-filter: blur(5px);
            color: var(--dark-text);
            border: 1px solid rgba(255,255,255,0.05);
        }

        .celebration-memories {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin: 30px 0;
        }

        .celebration-memory {
            aspect-ratio: 1;
            background: rgba(37, 37, 37, 0.8);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2em;
            backdrop-filter: blur(5px);
            transition: transform 0.3s ease;
            overflow: hidden;
            border: 1px solid rgba(255,255,255,0.05);
        }

        .celebration-memory img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .celebration-memory:hover {
            transform: scale(1.05);
        }

        .celebration-cake {
            margin: 30px 0;
            cursor: pointer;
        }

        .celebration-cake img {
            max-width: 300px;
            filter: drop-shadow(0 10px 20px rgba(0,0,0,0.5));
            transition: transform 0.3s ease;
        }

        .celebration-cake img:hover {
            transform: scale(1.05);
        }

        .celebration-countdown {
            font-size: 2.5em;
            margin: 30px 0;
            font-weight: bold;
            background: rgba(37, 37, 37, 0.8);
            padding: 20px;
            border-radius: 15px;
            backdrop-filter: blur(5px);
            color: var(--primary);
            border: 1px solid rgba(255,255,255,0.05);
        }

        .celebration-btn {
            background: var(--primary);
            color: var(--dark-bg);
            border: none;
            padding: 15px 40px;
            border-radius: 25px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 20px 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }

        .celebration-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(0,0,0,0.4);
        }

        .creator-mode {
            display: block;
        }

        .celebration-mode {
            display: none;
        }

        .progress-bar {
            display: flex;
            justify-content: center;
            margin: 30px 0;
        }

        .progress-step {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: #333;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 10px;
            position: relative;
            transition: all 0.3s ease;
        }

        .progress-step.active {
            background: var(--primary);
            color: var(--dark-bg);
        }

        .progress-step.completed {
            background: var(--success);
            color: white;
        }

        .progress-step::after {
            content: "";
            position: absolute;
            top: 50%;
            left: 100%;
            width: 20px;
            height: 2px;
            background: #333;
            transform: translateY(-50%);
        }

        .progress-step:last-child::after {
            display: none;
        }

        .progress-step.completed::after {
            background: var(--success);
        }

        .floating-hearts {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .heart {
            position: absolute;
            font-size: 20px;
            color: var(--primary);
            animation: float-heart 8s linear infinite;
            opacity: 0;
        }

        @keyframes float-heart {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--dark-surface);
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            z-index: 1001;
            display: flex;
            align-items: center;
            gap: 10px;
            transform: translateX(150%);
            transition: transform 0.3s ease;
            border-left: 4px solid var(--primary);
            color: var(--dark-text);
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            border-left: 4px solid var(--success);
        }

        .notification.error {
            border-left: 4px solid var(--accent);
        }

        .file-input {
            display: none;
        }

        .dark-theme-options {
            display: flex;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .dark-theme-option {
            width: 50px;
            height: 50px;
            border-radius: 10px;
            cursor: pointer;
            border: 3px solid transparent;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .dark-theme-option.active {
            border-color: var(--primary);
            transform: scale(1.1);
        }

        .dark-theme-option::after {
            content: "✓";
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 1.5em;
            opacity: 0;
            transition: opacity 0.3s ease;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }

        .dark-theme-option.active::after {
            opacity: 1;
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Floating hearts background -->
    <div class="floating-hearts" id="floatingHearts"></div>

    <!-- Notification -->
    <div class="notification" id="notification">
        <i class="fas fa-check-circle"></i>
        <span id="notificationText">Success!</span>
    </div>

    <!-- Creator Mode (for you to customize) -->
    <div class="creator-mode">
        <div class="container">
            <header>
                <h1>Birthday Celebration Creator</h1>
                <p class="subtitle">Create a personalized birthday celebration for your friend and share it with a special link!</p>
                
            </header>

            <!-- Progress Bar -->
            <div class="progress-bar">
                <div class="progress-step active" id="step1">1</div>
                <div class="progress-step" id="step2">2</div>
                <div class="progress-step" id="step3">3</div>
                <div class="progress-step" id="step4">4</div>
                <div class="progress-step" id="step5">5</div>
            </div>

            <div class="nav-buttons">
                <button class="nav-btn active" onclick="showSection('setup')"><i class="fas fa-cog"></i> Setup</button>
                <button class="nav-btn" onclick="showSection('card')"><i class="fas fa-envelope"></i> Birthday Card</button>
                <button class="nav-btn" onclick="showSection('wishes')"><i class="fas fa-star"></i> Wishes</button>
                <button class="nav-btn" onclick="showSection('memories')"><i class="fas fa-camera"></i> Memories</button>
                <button class="nav-btn" onclick="showSection('share')"><i class="fas fa-share-alt"></i> Share</button>
            </div>

            <!-- Setup Section -->
            <div id="setup" class="section active">
                <h2>Let's Set Up the Celebration</h2>
                <div class="input-group">
                    <label><i class="fas fa-user"></i> Your Friend's Name:</label>
                    <input type="text" id="friendName" placeholder="Enter your friend's name..." value="Yusra">
                </div>
                <div class="input-group">
                    <label><i class="fas fa-calendar-alt"></i> Birthday Date:</label>
                    <input type="date" id="birthdayDate">
                </div>
                <div class="input-group">
                    <label><i class="fas fa-palette"></i> Select Dark Theme:</label>
                    <div class="dark-theme-options">
                        <div class="dark-theme-option active" style="background: linear-gradient(135deg, #121212 0%, #1A1A2E 100%);" onclick="selectTheme('purple')"></div>
                        <div class="dark-theme-option" style="background: linear-gradient(135deg, #0D0D0D 0%, #1E3A5F 100%);" onclick="selectTheme('blue')"></div>
                        <div class="dark-theme-option" style="background: linear-gradient(135deg, #1A1A1A 0%, #4A1E6B 100%);" onclick="selectTheme('deep-purple')"></div>
                        <div class="dark-theme-option" style="background: linear-gradient(135deg, #0F0F0F 0%, #2D5D2D 100%);" onclick="selectTheme('green')"></div>
                    </div>
                </div>
                <button class="btn" onclick="saveSetup()"><i class="fas fa-save"></i> Save Setup</button>
            </div>

            <!-- Birthday Card Section -->
            <div id="card" class="section">
                <h2>Create a Birthday Card</h2>
                <div class="input-group">
                    <label><i class="fas fa-pen"></i> Personal Message:</label>
                    <textarea id="cardMessage" rows="5" placeholder="Write a heartfelt birthday message...">Wishing you the happiest birthday filled with joy, laughter, and wonderful memories! May all your dreams come true today and always.</textarea>
                </div>
                <div class="input-group">
                    <label><i class="fas fa-signature"></i> From:</label>
                    <input type="text" id="fromName" placeholder="Your name..." value="Your Best Friend">
                </div>
                <button class="btn" onclick="generateCard()"><i class="fas fa-eye"></i> Preview Card</button>
                <div id="cardPreview"></div>
            </div>

            <!-- Wishes Section -->
            <div id="wishes" class="section">
                <h2>Add Birthday Wishes</h2>
                <div class="input-group">
                    <label><i class="fas fa-magic"></i> Add a Wish:</label>
                    <input type="text" id="wishInput" placeholder="Enter a birthday wish...">
                    <button class="btn" onclick="addWish()"><i class="fas fa-plus"></i> Add Wish</button>
                </div>
                <div class="wish-list" id="wishList"></div>
            </div>

            <!-- Memories Section -->
            <div id="memories" class="section">
                <h2>Add Birthday Memories</h2>
                <p style="color: var(--dark-text-secondary); margin-bottom: 20px;">Upload photos and add memorable moments to make it personal!</p>
                
                <div class="input-group">
                    <label><i class="fas fa-history"></i> Add a Memory Description:</label>
                    <input type="text" id="memoryInput" placeholder="Enter a special memory...">
                    <button class="btn" onclick="addMemory()"><i class="fas fa-plus"></i> Add Memory</button>
                </div>
                
                <div class="input-group">
                    <label><i class="fas fa-images"></i> Upload Photos:</label>
                    <div class="photo-upload" onclick="document.getElementById('photoUpload').click()">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <p>Click to upload photos</p>
                        <input type="file" id="photoUpload" class="file-input" accept="image/*" multiple onchange="handlePhotoUpload(event)">
                    </div>
                </div>
                
                <div class="wish-list" id="memoriesList"></div>
                <div class="photo-gallery" id="photoGallery"></div>
            </div>

            <!-- Share Section -->
            <div id="share" class="section">
                <h2>Share the Celebration</h2>
                <p style="color: var(--dark-text-secondary); margin-bottom: 20px;">Generate a special link to send to your friend. When they open it, they'll see the celebration page!</p>
                <button class="btn" onclick="generateShareLink()"><i class="fas fa-link"></i> Generate Celebration Link</button>
                <div id="shareLinkContainer" style="display: none;">
                    <p style="margin-top: 20px; font-weight: bold;">Copy this link and send it to your friend:</p>
                    <div class="share-link" id="shareLink"></div>
                    <button class="btn" onclick="copyLink()"><i class="fas fa-copy"></i> Copy Link</button>
                    <button class="btn btn-success" onclick="previewCelebration()"><i class="fas fa-eye"></i> Preview Celebration</button>
                    <button class="btn" onclick="resetCelebration()"><i class="fas fa-redo"></i> Create New Celebration</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Celebration Page (for your friend) -->
    <div id="celebrationPage" class="celebration-page">
        <div class="celebration-content">
            <h1 class="celebration-title" id="celebrationName">Happy Birthday!</h1>
            <p class="celebration-message" id="celebrationMessage">Wishing you a fantastic day filled with joy and laughter!</p>
            
            <div class="celebration-card" id="celebrationCard">
                <h2>Your Special Card</h2>
                <p id="cardContent">A personalized birthday card just for you!</p>
                <p id="cardFrom">From your friend</p>
            </div>
            
            <div class="celebration-countdown" id="celebrationCountdown"></div>
            
            <div class="celebration-wishes" id="celebrationWishes"></div>
            
            <div class="celebration-memories" id="celebrationMemories"></div>
            
            <div class="celebration-cake" onclick="blowCandles()">
                <img src="https://cdn.pixabay.com/photo/2017/09/14/14/33/cake-2749201_1280.png" alt="Birthday Cake" class="cake-image">
            </div>
            <p style="margin-bottom: 20px; color: var(--dark-text-secondary);">Click the cake to blow out the candles!</p>
            
            <div id="cakeMessage" style="font-size: 1.5em; margin-top: 20px; color: var(--primary);"></div>
            
            <button class="celebration-btn" onclick="createConfetti()"><i class="fas fa-party-horn"></i> More Confetti!</button>
            <button class="celebration-btn" onclick="shareCelebration()"><i class="fas fa-share"></i> Share This Page</button>
        </div>
    </div>

    <script>
        // Data storage
        let celebrationData = {
            friendName: 'Yusra',
            birthdayDate: '',
            theme: 'purple',
            cardMessage: 'Wishing you the happiest birthday filled with joy, laughter, and wonderful memories! May all your dreams come true today and always.',
            fromName: 'Your Best Friend',
            wishes: [
                'May all your birthday wishes come true!',
                'Wishing you health, happiness and prosperity!',
                'Hope your special day is as amazing as you are!'
            ],
            memories: [
                'That time we laughed until we cried!',
                'Our amazing adventures together',
                'All the fun moments we shared'
            ],
            photos: []
        };

        let countdownInterval;

        // Initialize with sample data
        function initializeSampleData() {
            document.getElementById('friendName').value = celebrationData.friendName;
            document.getElementById('cardMessage').value = celebrationData.cardMessage;
            document.getElementById('fromName').value = celebrationData.fromName;
            
            // Set birthday to next month
            const nextMonth = new Date();
            nextMonth.setMonth(nextMonth.getMonth() + 1);
            document.getElementById('birthdayDate').value = nextMonth.toISOString().split('T')[0];
            celebrationData.birthdayDate = nextMonth.toISOString().split('T')[0];
            
            displayWishes();
            displayMemories();
            displayPhotos();
            generateCard();
        }

        // Check if we're in celebration mode (via URL parameters)
        function checkCelebrationMode() {
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.has('celebration')) {
                loadCelebrationData();
                showCelebrationPage();
                return true;
            }
            return false;
        }

        // Load celebration data from URL
        function loadCelebrationData() {
            const urlParams = new URLSearchParams(window.location.search);
            
            if (urlParams.has('name')) {
                celebrationData.friendName = decodeURIComponent(urlParams.get('name'));
            }
            if (urlParams.has('date')) {
                celebrationData.birthdayDate = urlParams.get('date');
            }
            if (urlParams.has('theme')) {
                celebrationData.theme = urlParams.get('theme');
            }
            if (urlParams.has('card')) {
                celebrationData.cardMessage = decodeURIComponent(urlParams.get('card'));
            }
            if (urlParams.has('from')) {
                celebrationData.fromName = decodeURIComponent(urlParams.get('from'));
            }
            if (urlParams.has('wishes')) {
                celebrationData.wishes = JSON.parse(decodeURIComponent(urlParams.get('wishes')));
            }
            if (urlParams.has('memories')) {
                celebrationData.memories = JSON.parse(decodeURIComponent(urlParams.get('memories')));
            }
            
            applyTheme(celebrationData.theme);
        }

        // Apply selected theme
        function applyTheme(theme) {
            const root = document.documentElement;
            
            switch(theme) {
                case 'blue':
                    root.style.setProperty('--primary', '#64B5F6');
                    root.style.setProperty('--secondary', '#4FC3F7');
                    root.style.setProperty('--accent', '#FF8A65');
                    break;
                case 'deep-purple':
                    root.style.setProperty('--primary', '#9575CD');
                    root.style.setProperty('--secondary', '#7986CB');
                    root.style.setProperty('--accent', '#FF80AB');
                    break;
                case 'green':
                    root.style.setProperty('--primary', '#81C784');
                    root.style.setProperty('--secondary', '#4DB6AC');
                    root.style.setProperty('--accent', '#FFB74D');
                    break;
                default:
                    root.style.setProperty('--primary', '#BB86FC');
                    root.style.setProperty('--secondary', '#03DAC6');
                    root.style.setProperty('--accent', '#FF7597');
            }
        }

        // Show celebration page
        function showCelebrationPage() {
            document.querySelector('.creator-mode').style.display = 'none';
            document.getElementById('celebrationPage').style.display = 'block';
            
            // Populate celebration page with data
            document.getElementById('celebrationName').textContent = `Happy Birthday, ${celebrationData.friendName}!`;
            
            if (celebrationData.cardMessage) {
                document.getElementById('cardContent').textContent = celebrationData.cardMessage;
            }
            
            if (celebrationData.fromName) {
                document.getElementById('cardFrom').textContent = `From ${celebrationData.fromName}`;
            }
            
            // Display wishes
            const wishesContainer = document.getElementById('celebrationWishes');
            if (celebrationData.wishes.length > 0) {
                wishesContainer.innerHTML = '<h3>Birthday Wishes</h3>';
                celebrationData.wishes.forEach(wish => {
                    const wishElement = document.createElement('div');
                    wishElement.className = 'celebration-wish';
                    wishElement.textContent = wish;
                    wishesContainer.appendChild(wishElement);
                });
            }
            
            // Display memories
            const memoriesContainer = document.getElementById('celebrationMemories');
            if (celebrationData.memories.length > 0) {
                memoriesContainer.innerHTML = '<h3>Special Memories</h3>';
                celebrationData.memories.forEach(memory => {
                    const memoryElement = document.createElement('div');
                    memoryElement.className = 'celebration-memory';
                    memoryElement.textContent = memory;
                    memoriesContainer.appendChild(memoryElement);
                });
            }
            
            // Display photos
            if (celebrationData.photos.length > 0) {
                const photosContainer = document.createElement('div');
                photosContainer.className = 'celebration-memories';
                photosContainer.innerHTML = '<h3>Photo Memories</h3>';
                
                celebrationData.photos.forEach(photo => {
                    const photoElement = document.createElement('div');
                    photoElement.className = 'celebration-memory';
                    const img = document.createElement('img');
                    img.src = photo;
                    photoElement.appendChild(img);
                    photosContainer.appendChild(photoElement);
                });
                
                memoriesContainer.parentNode.insertBefore(photosContainer, memoriesContainer.nextSibling);
            }
            
            // Start countdown if birthday date is set
            if (celebrationData.birthdayDate) {
                startCountdown();
            }
            
            // Create initial confetti
            createConfetti();
            createFloatingHearts();
        }

        // Creator mode functions
        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(sectionId).classList.add('active');
            event.target.classList.add('active');
            
            // Update progress bar
            updateProgressBar(sectionId);
        }

        function updateProgressBar(sectionId) {
            const steps = {
                'setup': 1,
                'card': 2,
                'wishes': 3,
                'memories': 4,
                'share': 5
            };
            
            const currentStep = steps[sectionId];
            
            for (let i = 1; i <= 5; i++) {
                const step = document.getElementById(`step${i}`);
                if (i < currentStep) {
                    step.classList.add('completed');
                    step.classList.remove('active');
                } else if (i === currentStep) {
                    step.classList.add('active');
                    step.classList.remove('completed');
                } else {
                    step.classList.remove('active', 'completed');
                }
            }
        }

        function selectTheme(theme) {
            document.querySelectorAll('.dark-theme-option').forEach(opt => opt.classList.remove('active'));
            event.target.classList.add('active');
            celebrationData.theme = theme;
            applyTheme(theme);
        }

        function saveSetup() {
            celebrationData.friendName = document.getElementById('friendName').value;
            celebrationData.birthdayDate = document.getElementById('birthdayDate').value;
            
            if (celebrationData.friendName) {
                showNotification(`Setup saved for ${celebrationData.friendName}!`, 'success');
            } else {
                showNotification('Please enter your friend\'s name!', 'error');
            }
        }

        function generateCard() {
            celebrationData.cardMessage = document.getElementById('cardMessage').value;
            celebrationData.fromName = document.getElementById('fromName').value;
            
            const preview = document.getElementById('cardPreview');
            
            if (celebrationData.cardMessage) {
                preview.innerHTML = `
                    <div class="birthday-card">
                        <h2>Happy Birthday ${celebrationData.friendName || 'Friend'}!</h2>
                        <p>${celebrationData.cardMessage}</p>
                        ${celebrationData.fromName ? `<p><strong>From ${celebrationData.fromName}</strong></p>` : ''}
                    </div>
                `;
                showNotification('Card preview generated!', 'success');
            } else {
                preview.innerHTML = '<p>Please enter a message to preview the card.</p>';
                showNotification('Please enter a message for the card!', 'error');
            }
        }

        function addWish() {
            const wish = document.getElementById('wishInput').value;
            if (wish) {
                celebrationData.wishes.push(wish);
                document.getElementById('wishInput').value = '';
                displayWishes();
                showNotification('Wish added successfully!', 'success');
            } else {
                showNotification('Please enter a wish!', 'error');
            }
        }

        function displayWishes() {
            const list = document.getElementById('wishList');
            list.innerHTML = celebrationData.wishes.map((w, i) => `
                <div class="wish-item">
                    <div><strong>Wish ${i + 1}:</strong> ${w}</div>
                    <button onclick="removeWish(${i})" style="background: none; border: none; cursor: pointer; color: var(--primary);"><i class="fas fa-trash"></i></button>
                </div>
            `).join('');
        }

        function removeWish(index) {
            celebrationData.wishes.splice(index, 1);
            displayWishes();
            showNotification('Wish removed!', 'success');
        }

        function addMemory() {
            const memory = document.getElementById('memoryInput').value;
            if (memory) {
                celebrationData.memories.push(memory);
                document.getElementById('memoryInput').value = '';
                displayMemories();
                showNotification('Memory added successfully!', 'success');
            } else {
                showNotification('Please enter a memory!', 'error');
            }
        }

        function displayMemories() {
            const list = document.getElementById('memoriesList');
            list.innerHTML = celebrationData.memories.map((m, i) => `
                <div class="wish-item">
                    <div><strong>Memory ${i + 1}:</strong> ${m}</div>
                    <button onclick="removeMemory(${i})" style="background: none; border: none; cursor: pointer; color: var(--primary);"><i class="fas fa-trash"></i></button>
                </div>
            `).join('');
        }

        function removeMemory(index) {
            celebrationData.memories.splice(index, 1);
            displayMemories();
            showNotification('Memory removed!', 'success');
        }

        function handlePhotoUpload(event) {
            const files = event.target.files;
            if (files.length > 0) {
                for (let i = 0; i < files.length; i++) {
                    const file = files[i];
                    const reader = new FileReader();
                    
                    reader.onload = function(e) {
                        celebrationData.photos.push(e.target.result);
                        displayPhotos();
                        showNotification('Photo uploaded successfully!', 'success');
                    };
                    
                    reader.readAsDataURL(file);
                }
            }
        }

        function displayPhotos() {
            const gallery = document.getElementById('photoGallery');
            gallery.innerHTML = '';
            
            celebrationData.photos.forEach((photo, index) => {
                const photoItem = document.createElement('div');
                photoItem.className = 'photo-item';
                
                const img = document.createElement('img');
                img.src = photo;
                photoItem.appendChild(img);
                
                const deleteBtn = document.createElement('button');
                deleteBtn.innerHTML = '<i class="fas fa-times"></i>';
                deleteBtn.style.position = 'absolute';
                deleteBtn.style.top = '5px';
                deleteBtn.style.right = '5px';
                deleteBtn.style.background = 'rgba(30,30,30,0.7)';
                deleteBtn.style.border = 'none';
                deleteBtn.style.borderRadius = '50%';
                deleteBtn.style.width = '25px';
                deleteBtn.style.height = '25px';
                deleteBtn.style.cursor = 'pointer';
                deleteBtn.style.color = 'var(--dark-text)';
                deleteBtn.onclick = function(e) {
                    e.stopPropagation();
                    celebrationData.photos.splice(index, 1);
                    displayPhotos();
                    showNotification('Photo removed!', 'success');
                };
                
                photoItem.appendChild(deleteBtn);
                gallery.appendChild(photoItem);
            });
        }

        function generateShareLink() {
            // Validate data
            if (!celebrationData.friendName) {
                showNotification('Please set up your friend\'s name first!', 'error');
                showSection('setup');
                return;
            }
            
            // Get current URL without parameters
            const baseUrl = window.location.origin + window.location.pathname;
            
            // Create parameters
            const params = new URLSearchParams();
            params.append('celebration', 'true');
            params.append('name', encodeURIComponent(celebrationData.friendName));
            
            if (celebrationData.birthdayDate) {
                params.append('date', celebrationData.birthdayDate);
            }
            
            params.append('theme', celebrationData.theme);
            
            if (celebrationData.cardMessage) {
                params.append('card', encodeURIComponent(celebrationData.cardMessage));
            }
            
            if (celebrationData.fromName) {
                params.append('from', encodeURIComponent(celebrationData.fromName));
            }
            
            if (celebrationData.wishes.length > 0) {
                params.append('wishes', encodeURIComponent(JSON.stringify(celebrationData.wishes)));
            }
            
            if (celebrationData.memories.length > 0) {
                params.append('memories', encodeURIComponent(JSON.stringify(celebrationData.memories)));
            }
            
            // Create the full URL
            const shareUrl = `${baseUrl}?${params.toString()}`;
            
            // Display the link
            document.getElementById('shareLink').textContent = shareUrl;
            document.getElementById('shareLinkContainer').style.display = 'block';
            showNotification('Celebration link generated!', 'success');
        }

        function copyLink() {
            const linkText = document.getElementById('shareLink').textContent;
            navigator.clipboard.writeText(linkText).then(() => {
                showNotification('Celebration link copied to clipboard! Send it to your friend.', 'success');
            });
        }

        function previewCelebration() {
            showCelebrationPage();
        }

        function resetCelebration() {
            celebrationData = {
                friendName: '',
                birthdayDate: '',
                theme: 'purple',
                cardMessage: '',
                fromName: '',
                wishes: [],
                memories: [],
                photos: []
            };
            
            document.getElementById('friendName').value = '';
            document.getElementById('birthdayDate').value = '';
            document.getElementById('cardMessage').value = '';
            document.getElementById('fromName').value = '';
            document.getElementById('wishInput').value = '';
            document.getElementById('memoryInput').value = '';
            document.getElementById('shareLinkContainer').style.display = 'none';
            
            displayWishes();
            displayMemories();
            displayPhotos();
            document.getElementById('cardPreview').innerHTML = '';
            
            showSection('setup');
            applyTheme('purple');
            showNotification('New celebration started!', 'success');
        }

        // Celebration page functions
        function startCountdown() {
            const countdownElement = document.getElementById('celebrationCountdown');
            const birthday = new Date(celebrationData.birthdayDate);
            const now = new Date();
            
            // If birthday is today
            if (birthday.toDateString() === now.toDateString()) {
                countdownElement.textContent = "It's Your Birthday Today!";
                return;
            }
            
            // If birthday has passed this year, set for next year
            if (birthday < now) {
                birthday.setFullYear(birthday.getFullYear() + 1);
            }
            
            clearInterval(countdownInterval);
            
            countdownInterval = setInterval(() => {
                const now = new Date().getTime();
                const distance = birthday.getTime() - now;
                
                if (distance < 0) {
                    clearInterval(countdownInterval);
                    countdownElement.textContent = "Happy Birthday!";
                    return;
                }
                
                const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((distance % (1000 * 60)) / 1000);
                
                countdownElement.textContent = `${days}d ${hours}h ${minutes}m ${seconds}s until your birthday!`;
            }, 1000);
        }

        function blowCandles() {
            const msg = document.getElementById('cakeMessage');
          
            
            
            msg.innerHTML = 'Happy Birthday ' + celebrationData.friendName + '! Your wish will come true!';
            createConfetti();
            createFloatingHearts();
        }

        function createConfetti() {
            for (let i = 0; i < 100; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.background = [getComputedStyle(document.documentElement).getPropertyValue('--primary'), getComputedStyle(document.documentElement).getPropertyValue('--accent'), getComputedStyle(document.documentElement).getPropertyValue('--secondary'), '#4ECDC4', '#FF9E6D'][Math.floor(Math.random() * 5)];
                    confetti.style.animationDelay = Math.random() * 2 + 's';
                    document.body.appendChild(confetti);
                    setTimeout(() => confetti.remove(), 3000);
                }, i * 30);
            }
        }

        function createFloatingHearts() {
            const heartsContainer = document.getElementById('floatingHearts');
            for (let i = 0; i < 20; i++) {
                const heart = document.createElement('div');
                heart.className = 'heart';
                heart.innerHTML = '❤️';
                heart.style.left = Math.random() * 100 + '%';
                heart.style.animationDelay = Math.random() * 5 + 's';
                heart.style.fontSize = (Math.random() * 20 + 15) + 'px';
                heartsContainer.appendChild(heart);
                
                setTimeout(() => {
                    heart.remove();
                }, 8000);
            }
        }

        function shareCelebration() {
            if (navigator.share) {
                navigator.share({
                    title: `Happy Birthday ${celebrationData.friendName}!`,
                    text: `Check out this special birthday celebration for ${celebrationData.friendName}!`,
                    url: window.location.href
                });
            } else {
                copyLink();
            }
        }

        function showNotification(message, type) {
            const notification = document.getElementById('notification');
            const notificationText = document.getElementById('notificationText');
            
            notificationText.textContent = message;
            notification.className = `notification ${type}`;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Initialize
        if (!checkCelebrationMode()) {
            // We're in creator mode, initialize with sample data
            applyTheme('purple');
            updateProgressBar('setup');
            initializeSampleData();
        }
    </script>
</body>
</html>